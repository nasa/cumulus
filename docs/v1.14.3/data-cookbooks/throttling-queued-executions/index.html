<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Throttling queued executions · Cumulus Documentation</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="# Throttling queued executions"/><meta name="docsearch:version" content="v1.14.3"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Throttling queued executions · Cumulus Documentation"/><meta property="og:type" content="website"/><meta property="og:url" content="https://nasa.github.io/cumulus/"/><meta property="og:description" content="# Throttling queued executions"/><meta name="twitter:card" content="summary"/><link rel="shortcut icon" href="/cumulus/undefined"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script src="/cumulus/js/scrollSpy.js"></script><link rel="stylesheet" href="/cumulus/css/main.css"/><script src="/cumulus/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/cumulus/"><h2 class="headerTitle">Cumulus Documentation</h2></a><a href="/cumulus/versions"><h3>v1.14.3</h3></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class=""><a href="https://nasa.github.io/cumulus-api" target="_self">API Docs</a></li><li class=""><a href="/cumulus/docs/v1.14.3/cumulus-docs-readme" target="_self">Developer Docs</a></li><li class="siteNavGroupActive"><a href="/cumulus/docs/v1.14.3/data-cookbooks/about-cookbooks" target="_self">Data-Cookbooks</a></li><li class=""><a href="/cumulus/docs/v1.14.3/operator-docs/about-operator-docs" target="_self">Operator Docs</a></li><li class=""><a href="/cumulus/docs/v1.14.3/team" target="_self">Team</a></li><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>Cookbooks</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle">About Cookbooks</h3><ul class=""><li class="navListItem"><a class="navItem" href="/cumulus/docs/v1.14.3/data-cookbooks/about-cookbooks">About Cookbooks</a></li><li class="navListItem"><a class="navItem" href="/cumulus/docs/v1.14.3/data-cookbooks/setup">Data Cookbooks Setup</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Cookbooks</h3><ul class=""><li class="navListItem"><a class="navItem" href="/cumulus/docs/v1.14.3/data-cookbooks/hello-world">HelloWorld Workflow</a></li><li class="navListItem"><a class="navItem" href="/cumulus/docs/v1.14.3/data-cookbooks/sns">SNS Notification in Workflows</a></li><li class="navListItem"><a class="navItem" href="/cumulus/docs/v1.14.3/data-cookbooks/sips-workflow">Science Investigator-led Processing Systems (SIPS)</a></li><li class="navListItem"><a class="navItem" href="/cumulus/docs/v1.14.3/data-cookbooks/cnm-workflow">CNM Workflow</a></li><li class="navListItem"><a class="navItem" href="/cumulus/docs/v1.14.3/data-cookbooks/error-handling">Error Handling in Workflows</a></li><li class="navListItem"><a class="navItem" href="/cumulus/docs/v1.14.3/data-cookbooks/choice-states">Choice States</a></li><li class="navListItem"><a class="navItem" href="/cumulus/docs/v1.14.3/data-cookbooks/cloudwatch-retention">Cloudwatch Retention</a></li><li class="navListItem"><a class="navItem" href="/cumulus/docs/v1.14.3/data-cookbooks/browse-generation">Ingest Browse Generation</a></li><li class="navListItem"><a class="navItem" href="/cumulus/docs/v1.14.3/data-cookbooks/tracking-files">Tracking Ancillary Files</a></li><li class="navListItem"><a class="navItem" href="/cumulus/docs/v1.14.3/data-cookbooks/run-tasks-in-lambda-or-docker">Run Step Function Tasks in Lambda or Docker</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/cumulus/docs/v1.14.3/data-cookbooks/throttling-queued-executions">Throttling queued executions</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"></header><article><div><span><h1><a class="anchor" aria-hidden="true" id="throttling-queued-executions"></a><a href="#throttling-queued-executions" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Throttling queued executions</h1>
<p>In this entry, we will walkthrough how to create an SQS queue for scheduling executions which will be used to limit those executions to a maximum concurrency. And we will see how to configure our Cumulus workflows/rules to use this queue.</p>
<p>We will also review the architecture of this feature and highlight some implementation notes.</p>
<p>Limiting the number of executions that can be running from a given queue is useful for controlling the cloud resource usage of workflows that may be lower priority, such as granule reingestion or reprocessing campaigns. It could also be useful for preventing workflows from exceeding known resource limits, such as a maximum number of open connections to a data provider.</p>
<h2><a class="anchor" aria-hidden="true" id="implementing-the-queue"></a><a href="#implementing-the-queue" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Implementing the queue</h2>
<h3><a class="anchor" aria-hidden="true" id="create-and-deploy-the-queue"></a><a href="#create-and-deploy-the-queue" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Create and deploy the queue</h3>
<h4><a class="anchor" aria-hidden="true" id="define-a-queue-with-a-maximum-number-of-executions"></a><a href="#define-a-queue-with-a-maximum-number-of-executions" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Define a queue with a maximum number of executions</h4>
<p>In your <code>app/config.yml</code>, define a new queue with a <code>maxExecutions</code> value:</p>
<pre><code class="hljs css language-yaml">  <span class="hljs-attr">sqs:</span>
    <span class="hljs-attr">backgroundJobQueue:</span>
      <span class="hljs-attr">visibilityTimeout:</span> <span class="hljs-number">60</span>
      <span class="hljs-attr">retry:</span> <span class="hljs-number">30</span>
      <span class="hljs-attr">maxExecutions:</span> <span class="hljs-number">5</span>
      <span class="hljs-attr">consumer:</span>
        <span class="hljs-bullet">-</span> <span class="hljs-attr">lambda:</span> <span class="hljs-string">sqs2sfThrottle</span>    <span class="hljs-comment"># you must use this lambda</span>
          <span class="hljs-attr">schedule:</span> <span class="hljs-string">rate(1</span> <span class="hljs-string">minute)</span>
          <span class="hljs-attr">messageLimit:</span> <span class="hljs-string">'<span class="hljs-template-variable">{{sqs_consumer_rate}'
          state: ENABLED
</span></span></code></pre>
<p><strong>Please note that you must use the <code>sqs2sfThrottle</code> lambda as the consumer for any queue with a <code>maxExecutions</code> value</strong> or else the execution throttling will not work correctly.
Additionally, please allow at least 60 seconds after creation before using the queue as associated infrastructure and triggers are set up and made ready.</p>
<h4><a class="anchor" aria-hidden="true" id="re-deploy-your-cumulus-app"></a><a href="#re-deploy-your-cumulus-app" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Re-deploy your Cumulus app</h4>
<p>Once you <a href="../deployment/deployment-readme#update-cumulus">re-deploy your Cumulus application</a>, all of your workflow templates will be updated to the include information about your queue (the output below is partial output from an expected workflow template):</p>
<pre><code class="hljs css language-json">{
  <span class="hljs-attr">"meta"</span>: {
    <span class="hljs-attr">"queues"</span>: {
      <span class="hljs-attr">"backgroundJobQueue"</span>: <span class="hljs-string">"&lt;backgroundJobQueue_SQS_URL&gt;"</span>
    },
    <span class="hljs-attr">"queueExecutionLimits"</span>: {
      <span class="hljs-attr">"backgroundJobQueue"</span>: <span class="hljs-number">5</span>
    }
  }
}
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="integrate-your-queue-with-workflows-and-or-rules"></a><a href="#integrate-your-queue-with-workflows-and-or-rules" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Integrate your queue with workflows and/or rules</h3>
<h4><a class="anchor" aria-hidden="true" id="integrate-queue-with-queuing-steps-in-sips-workflows"></a><a href="#integrate-queue-with-queuing-steps-in-sips-workflows" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Integrate queue with queuing steps in SIPS workflows</h4>
<p>For any SIPS workflows using <code>queue-granules</code> or <code>queue-pdrs</code> that you want to use your new queue, update the Cumulus configuration of those steps in your workflows.</p>
<pre><code class="hljs css language-yaml">  <span class="hljs-attr">QueueGranules:</span>
    <span class="hljs-attr">Parameters:</span>
      <span class="hljs-attr">cma:</span>
        <span class="hljs-string">event.$:</span> <span class="hljs-string">'$'</span>
        <span class="hljs-attr">task_config:</span>
            <span class="hljs-attr">provider:</span> <span class="hljs-string">'{$.meta.provider}'</span>
            <span class="hljs-attr">internalBucket:</span> <span class="hljs-string">'{$.meta.buckets.internal.name}'</span>
            <span class="hljs-attr">stackName:</span> <span class="hljs-string">'{$.meta.stack}'</span>
            <span class="hljs-attr">granuleIngestMessageTemplateUri:</span> <span class="hljs-string">'{$.meta.templates.IngestGranule}'</span>
            <span class="hljs-comment"># configure the step to use your new queue</span>
            <span class="hljs-attr">queueUrl:</span> <span class="hljs-string">'{$.meta.queues.backgroundJobQueue}'</span>
</code></pre>
<pre><code class="hljs css language-yaml">  <span class="hljs-attr">QueuePdrs:</span>
    <span class="hljs-attr">Parameters:</span>
      <span class="hljs-attr">cma:</span>
        <span class="hljs-string">event.$:</span> <span class="hljs-string">'$'</span>
        <span class="hljs-attr">task_config:</span>
            <span class="hljs-comment"># configure the step to use your new queue</span>
            <span class="hljs-attr">queueUrl:</span> <span class="hljs-string">'{$.meta.queues.backgroundJobQueue}'</span>
            <span class="hljs-attr">parsePdrMessageTemplateUri:</span> <span class="hljs-string">'{$.meta.templates.ParsePdr}'</span>
            <span class="hljs-attr">provider:</span> <span class="hljs-string">'{$.meta.provider}'</span>
            <span class="hljs-attr">collection:</span> <span class="hljs-string">'{$.meta.collection}'</span>
</code></pre>
<p>After making these changes, re-deploy your Cumulus application for the execution throttling to take effect.</p>
<h4><a class="anchor" aria-hidden="true" id="create-update-a-rule-to-use-your-new-queue"></a><a href="#create-update-a-rule-to-use-your-new-queue" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Create/update a rule to use your new queue</h4>
<p>Create or update a rule definition to include a <code>queueName</code> property that refers to your new queue:</p>
<pre><code class="hljs css language-json">{
  <span class="hljs-attr">"name"</span>: <span class="hljs-string">"s3_provider_rule"</span>,
  <span class="hljs-attr">"workflow"</span>: <span class="hljs-string">"DiscoverAndQueuePdrs"</span>,
  <span class="hljs-attr">"provider"</span>: <span class="hljs-string">"s3_provider"</span>,
  <span class="hljs-attr">"collection"</span>: {
    <span class="hljs-attr">"name"</span>: <span class="hljs-string">"MOD09GQ"</span>,
    <span class="hljs-attr">"version"</span>: <span class="hljs-string">"006"</span>
  },
  <span class="hljs-attr">"rule"</span>: {
    <span class="hljs-attr">"type"</span>: <span class="hljs-string">"onetime"</span>
  },
  <span class="hljs-attr">"state"</span>: <span class="hljs-string">"ENABLED"</span>,
  <span class="hljs-attr">"queueName"</span>: <span class="hljs-string">"backgroundJobQueue"</span> <span class="hljs-comment">// configure rule to use your queue</span>
}
</code></pre>
<p>After creating/updating the rule, any subsequent invocations of the rule should respect the maximum number of executions when starting workflows from the queue.</p>
<h2><a class="anchor" aria-hidden="true" id="architecture"></a><a href="#architecture" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Architecture</h2>
<p><img src="/cumulus/docs/assets/queued-execution-throttling.png" alt="Architecture diagram showing how queued execution throttling works"></p>
<p>Execution throttling based on the queue works by manually keeping a count (semaphore) of how many executions are running for the queue at a time. The key operation that prevents the number of executions from exceeding the maximum for the queue is that before starting new executions, the <code>sqs2sfThrottle</code> lambda attempts to increment the semaphore and responds as follows:</p>
<ul>
<li>If the increment operation is successful, then the count was not at the maximum and an execution is started</li>
<li>If the increment operation fails, then the count was already at the maximum so no execution is started</li>
</ul>
<h2><a class="anchor" aria-hidden="true" id="final-notes"></a><a href="#final-notes" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Final notes</h2>
<p>Limiting the number of concurrent executions for work scheduled via a queue has several consequences worth noting:</p>
<ul>
<li>The number of executions that are running for a given queue will be limited to the maximum for that queue regardless of which workflow(s) are started.</li>
<li>If you use the same queue to schedule executions across multiple workflows/rules, then the limit on the total number of executions running concurrently <strong>will be applied to all of the executions scheduled across all of those workflows/rules</strong>.</li>
<li>If you are scheduling the same workflow both via a queue with a <code>maxExecutions</code> value and a queue without a <code>maxExecutions</code> value, <strong>only the executions scheduled via the queue with the <code>maxExecutions</code> value will be limited to the maximum</strong>.</li>
</ul>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="/cumulus/docs/v1.14.3/data-cookbooks/run-tasks-in-lambda-or-docker"><span class="arrow-prev">← </span><span>Run Step Function Tasks in Lambda or Docker</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#implementing-the-queue">Implementing the queue</a><ul class="toc-headings"><li><a href="#create-and-deploy-the-queue">Create and deploy the queue</a></li><li><a href="#integrate-your-queue-with-workflows-and-or-rules">Integrate your queue with workflows and/or rules</a></li></ul></li><li><a href="#architecture">Architecture</a></li><li><a href="#final-notes">Final notes</a></li></ul></nav></div></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
                document.addEventListener('keyup', function(e) {
                  if (e.target !== document.body) {
                    return;
                  }
                  // keyCode for '/' (slash)
                  if (e.keyCode === 191) {
                    const search = document.getElementById('search_input_react');
                    search && search.focus();
                  }
                });
              </script><script>
              var search = docsearch({
                
                apiKey: 'undefined',
                indexName: 'undefined',
                inputSelector: '#search_input_react'
              });
            </script></body></html>