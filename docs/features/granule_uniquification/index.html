<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-v21.2.0 plugin-docs plugin-id-default docs-doc-id-features/granule_uniquification" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.4.3">
<title data-rh="true">Granule Uniquification Feature | Cumulus Documentation</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://nasa.github.io/cumulus/docs/features/granule_uniquification"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="v21.2.0"><meta data-rh="true" name="docusaurus_tag" content="docs-default-v21.2.0"><meta data-rh="true" name="docsearch:version" content="v21.2.0"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-v21.2.0"><meta data-rh="true" property="og:title" content="Granule Uniquification Feature | Cumulus Documentation"><meta data-rh="true" name="description" content="Overview"><meta data-rh="true" property="og:description" content="Overview"><link data-rh="true" rel="icon" href="/cumulus/img/cumulus.ico"><link data-rh="true" rel="canonical" href="https://nasa.github.io/cumulus/docs/features/granule_uniquification"><link data-rh="true" rel="alternate" href="https://nasa.github.io/cumulus/docs/features/granule_uniquification" hreflang="en"><link data-rh="true" rel="alternate" href="https://nasa.github.io/cumulus/docs/features/granule_uniquification" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://KBWSJQ0LBW-dsn.algolia.net" crossorigin="anonymous"><link rel="search" type="application/opensearchdescription+xml" title="Cumulus Documentation" href="/cumulus/opensearch.xml">
<script src="https://buttons.github.io/buttons.js"></script><link rel="stylesheet" href="/cumulus/assets/css/styles.4f54c3bd.css">
<link rel="preload" href="/cumulus/assets/js/runtime~main.38756b2a.js" as="script">
<link rel="preload" href="/cumulus/assets/js/main.ff8a21e5.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}return t}()||function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top navbar--primary"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/cumulus/"><div class="navbar__logo"><img src="/cumulus/img/ic_cumulus_logo_white.svg" alt="" class="themedImage_ToTc themedImage--light_HNdA" height="32" width="32"><img src="/cumulus/img/ic_cumulus_logo_white.svg" alt="" class="themedImage_ToTc themedImage--dark_i4oU" height="32" width="32"></div><b class="navbar__title text--truncate">Cumulus Documentation</b></a><a href="https://nasa.github.io/cumulus-api" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">API Docs<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a href="https://nasa.github.io/cumulus-distribution-api" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Distribution API Docs<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/cumulus/docs/">Developer Docs</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/cumulus/docs/data-cookbooks/about-cookbooks">Data Cookbooks</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/cumulus/docs/operator-docs/about-operator-docs">Operator Docs</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__link" aria-haspopup="true" aria-expanded="false" role="button" href="/cumulus/docs/">v21.2.0</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/cumulus/docs/next/features/granule_uniquification">Next</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/cumulus/docs/features/granule_uniquification">v21.2.0</a></li><li><a class="dropdown__link" href="/cumulus/docs/v21.0.0/features/granule_uniquification">v21.0.0</a></li><li><a class="dropdown__link" href="/cumulus/docs/v20.3.0/">v20.3.0</a></li><li><a class="dropdown__link" href="/cumulus/docs/v20.2.0/">v20.2.0</a></li><li><a class="dropdown__link" href="/cumulus/docs/v20.1.2/">v20.1.2</a></li><li><a class="dropdown__link" href="/cumulus/docs/v20.1.1/">v20.1.1</a></li><li><a class="dropdown__link" href="/cumulus/docs/v20.0.0/">v20.0.0</a></li><li><a class="dropdown__link" href="/cumulus/docs/v19.1.0/">v19.1.0</a></li><li><a class="dropdown__link" href="/cumulus/docs/v19.0.0/">v19.0.0</a></li><li><a class="dropdown__link" href="/cumulus/docs/v18.5.0/">v18.5.0</a></li><li><a class="dropdown__link" href="/cumulus/docs/v18.4.0/">v18.4.0</a></li><li><a class="dropdown__link" href="/cumulus/docs/v18.3.4/">v18.3.4</a></li><li><a class="dropdown__link" href="/cumulus/docs/v18.2.0/">v18.2.0</a></li><li><a class="dropdown__link" href="/cumulus/docs/v18.1.0/">v18.1.0</a></li><li><a class="dropdown__link" href="/cumulus/docs/v18.0.0/">v18.0.0</a></li><li><a class="dropdown__link" href="/cumulus/docs/v17.0.0/">v17.0.0</a></li><li><a class="dropdown__link" href="/cumulus/docs/v16.1.3/">v16.1.3</a></li><li><a class="dropdown__link" href="/cumulus/docs/v16.0.0/">v16.0.0</a></li><li><a class="dropdown__link" href="/cumulus/docs/v15.0.2/">v15.0.2</a></li><li><a class="dropdown__link" href="/cumulus/docs/v14.1.0/">v14.1.0</a></li><li><a class="dropdown__link" href="/cumulus/docs/v13.4.0/">v13.4.0</a></li><li><a class="dropdown__link" href="/cumulus/docs/v13.0.0/">v13.0.0</a></li><li><a class="dropdown__link" href="/cumulus/docs/v12.0.0/">v12.0.0</a></li><li><a class="dropdown__link" href="/cumulus/docs/v11.1.0/">v11.1.0</a></li><li><a class="dropdown__link" href="/cumulus/docs/v11.0.0/">v11.0.0</a></li><li><a class="dropdown__link" href="/cumulus/docs/v10.1.0/">v10.1.0</a></li><li><a class="dropdown__link" href="/cumulus/docs/v10.0.0/">v10.0.0</a></li><li><a class="dropdown__link" href="/cumulus/docs/v9.9.0/">v9.9.0</a></li><li><a class="dropdown__link" href="/cumulus/docs/v9.0.0/">v9.0.0</a></li><li><hr class="dropdown-separator"></li><li><a class="dropdown__link" href="/cumulus/versions">All versions</a></li></ul></div><a href="https://github.com/nasa/cumulus" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="Cumulus Core GitHub Repository"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search (Command+K)"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="true" href="/cumulus/docs/category/getting-started">Getting Started</a><button aria-label="Toggle the collapsible sidebar category &#x27;Getting Started&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cumulus/docs/">Introduction</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cumulus/docs/getting-started">Getting Started</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cumulus/docs/glossary">Glossary</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cumulus/docs/faqs">Frequently Asked Questions</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="true" href="/cumulus/docs/category/about-cumulus">About Cumulus</a><button aria-label="Toggle the collapsible sidebar category &#x27;About Cumulus&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cumulus/docs/architecture">Architecture</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cumulus/docs/interfaces">Interfaces</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cumulus/docs/team">Cumulus Team</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="true" href="/cumulus/docs/category/deployment">Deployment</a><button aria-label="Toggle the collapsible sidebar category &#x27;Deployment&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cumulus/docs/deployment/">How to Deploy Cumulus</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cumulus/docs/deployment/create_bucket">Creating an S3 Bucket</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cumulus/docs/deployment/terraform-best-practices">Terraform Best Practices</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cumulus/docs/deployment/components">Component-based Cumulus Deployment</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="true" tabindex="0" href="/cumulus/docs/deployment/databases-introduction">Databases</a><button aria-label="Toggle the collapsible sidebar category &#x27;Databases&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/cumulus/docs/deployment/postgres_database_deployment">PostgreSQL Database Deployment</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/cumulus/docs/deployment/choosing_configuring_rds">RDS: Choosing and Configuring Your Database Type</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="true" tabindex="0" href="/cumulus/docs/deployment/apis-introduction">APIs</a><button aria-label="Toggle the collapsible sidebar category &#x27;APIs&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/cumulus/docs/deployment/thin_egress_app">Using the Thin Egress App (TEA) for Cumulus Distribution</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/cumulus/docs/deployment/cumulus_distribution">Using the Cumulus Distribution API</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="true" tabindex="0" href="/cumulus/docs/category/logs">Logs</a><button aria-label="Toggle the collapsible sidebar category &#x27;Logs&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/cumulus/docs/deployment/api-gateway-logging">API Gateway Logging</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/cumulus/docs/deployment/share-s3-access-logs">Share S3 Access Logs</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/cumulus/docs/deployment/cloudwatch-logs-delivery">Configure Cloudwatch Logs Delivery</a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cumulus/docs/deployment/upgrade-readme">Upgrading Cumulus</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="true" href="/cumulus/docs/category/configuration">Configuration</a><button aria-label="Toggle the collapsible sidebar category &#x27;Configuration&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cumulus/docs/configuration/data-management-types">Cumulus Data Management Types</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cumulus/docs/configuration/monitoring-readme">Monitoring Best Practices</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cumulus/docs/configuration/server_access_logging">S3 Server Access Logging</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cumulus/docs/configuration/cloudwatch-retention">Cloudwatch Retention</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cumulus/docs/configuration/lifecycle-policies">Setting S3 Lifecycle Policies</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cumulus/docs/configuration/collection-storage-best-practices">Collection Cost Tracking and Storage Best Practices</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cumulus/docs/configuration/task-configuration">Configuration of Tasks</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="true" href="/cumulus/docs/category/development">Development</a><button aria-label="Toggle the collapsible sidebar category &#x27;Development&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cumulus/docs/workflows/developing-a-cumulus-workflow">Creating a Cumulus Workflow</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cumulus/docs/workflows/developing-workflow-tasks">Developing Workflow Tasks</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cumulus/docs/workflows/lambda">Develop Lambda Functions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cumulus/docs/workflows/docker">Dockerizing Data Processing</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cumulus/docs/workflows/workflow-configuration-how-to">Workflow Configuration How To&#x27;s</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cumulus/docs/adding-a-task">Contributing a Task</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="true" href="/cumulus/docs/category/workflows">Workflows</a><button aria-label="Toggle the collapsible sidebar category &#x27;Workflows&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cumulus/docs/workflows/">Workflows Overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cumulus/docs/workflows/protocol">Workflow Protocol</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cumulus/docs/workflows/input_output">Workflow Inputs &amp; Outputs</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cumulus/docs/workflows/workflow-triggers">Workflow Triggers</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cumulus/docs/workflows/message_granule_writes">Workflow Message Granule Writes</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="true" tabindex="0" href="/cumulus/docs/category/workflow-tasks">Workflow Tasks</a><button aria-label="Toggle the collapsible sidebar category &#x27;Workflow Tasks&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/cumulus/docs/tasks">Cumulus Tasks</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/cumulus/docs/workflows/cumulus-task-message-flow">Cumulus Tasks: Message Flow</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/cumulus/docs/workflow_tasks/discover_granules">Discover Granules</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/cumulus/docs/workflow_tasks/files_to_granules">Files To Granules</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/cumulus/docs/workflow_tasks/move_granules">Move Granules</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/cumulus/docs/workflow_tasks/queue_granules">Queue Granules</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/cumulus/docs/workflow_tasks/lzards_backup">LZARDS Backup</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/cumulus/docs/workflow_tasks/parse_pdr">Parse PDR</a></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/cumulus/docs/category/features">Features</a><button aria-label="Toggle the collapsible sidebar category &#x27;Features&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cumulus/docs/features/backup_and_restore">Cumulus Backup and Restore</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cumulus/docs/features/dead_letter_queues">Dead Letter Queues</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cumulus/docs/features/dead_letter_archive">Cumulus Dead Letter Archive</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cumulus/docs/features/execution_payload_retention">Execution Payload Retention</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cumulus/docs/features/reports">Reconciliation Reports</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cumulus/docs/features/ancillary_metadata">Ancillary Metadata Export</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cumulus/docs/features/distribution-metrics">Cumulus Distribution Metrics</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cumulus/docs/features/logging-esdis-metrics">Writing logs for ESDIS Metrics</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cumulus/docs/features/record_write_options">Options for writing records to Cumulus datastore during workflow executions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cumulus/docs/features/replay-kinesis-messages">How to replay Kinesis messages after an outage</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cumulus/docs/features/replay-archived-sqs-messages">How to replay SQS messages archived in S3</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/cumulus/docs/features/granule_uniquification">Granule Uniquification Feature</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cumulus/docs/features/change_granule_collection">Cumulus Change Granule Collections</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cumulus/docs/features/record_archival">Database Record Archival</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="true" href="/cumulus/docs/category/troubleshooting">Troubleshooting</a><button aria-label="Toggle the collapsible sidebar category &#x27;Troubleshooting&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cumulus/docs/troubleshooting/">How to Troubleshoot and Fix Issues</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cumulus/docs/troubleshooting/troubleshooting-deployment">Troubleshooting Deployment</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cumulus/docs/troubleshooting/rerunning-workflow-executions">Rerunning workflow executions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cumulus/docs/troubleshooting/reindex-elasticsearch">Reindexing Elasticsearch Guide</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cumulus/docs/troubleshooting/troubleshooting-database-migrations">Troubleshooting Database Migrations</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="true" href="/cumulus/docs/category/cumulus-development">Cumulus Development</a><button aria-label="Toggle the collapsible sidebar category &#x27;Cumulus Development&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cumulus/docs/adding-a-task">Contributing a Task</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cumulus/docs/docs-how-to">Cumulus Documentation: How To&#x27;s</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cumulus/docs/development/release">Versioning and Releases</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="true" href="/cumulus/docs/category/integrator-guide">Integrator Guide</a><button aria-label="Toggle the collapsible sidebar category &#x27;Integrator Guide&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cumulus/docs/integrator-guide/about-int-guide">About Integrator Guide</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cumulus/docs/integrator-guide/int-common-use-cases">Integrator Common Use Cases</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cumulus/docs/integrator-guide/workflow-add-new-lambda">Workflow - Add New Lambda</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cumulus/docs/integrator-guide/workflow-ts-failed-step">Workflow - Troubleshoot Failed Step(s)</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="true" href="/cumulus/docs/category/upgrade-notes">Upgrade Notes</a><button aria-label="Toggle the collapsible sidebar category &#x27;Upgrade Notes&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cumulus/docs/upgrade-notes/migrate_tea_standalone">Migrate TEA deployment to standalone module</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cumulus/docs/upgrade-notes/upgrade_tf_version_0.13.6">Upgrade to TF version 0.13.6</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cumulus/docs/upgrade-notes/upgrade_tf_version_1.5.3">Upgrade to TF version 1.5.3</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cumulus/docs/upgrade-notes/upgrade-rds">Upgrade to RDS release</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cumulus/docs/upgrade-notes/cumulus_distribution_migration">Migrate from TEA deployment to Cumulus Distribution</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cumulus/docs/upgrade-notes/update-task-file-schemas">Updates to task granule file schemas</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cumulus/docs/upgrade-notes/update-cma-2.0.2">Upgrade to CMA 2.0.2</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cumulus/docs/upgrade-notes/upgrade-rds-phase-3-release">Upgrade RDS Phase 3 Release</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cumulus/docs/upgrade-notes/rds-phase-3-data-migration-guidance">Data Integrity &amp; Migration Guidance (RDS Phase 3 Upgrade)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cumulus/docs/upgrade-notes/upgrade-rds-cluster-tf-postgres-13">Upgrade Database Cluster to PostgreSQL v13</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cumulus/docs/upgrade-notes/upgrade-rds-cluster-tf-postgres-17">Upgrade Database Cluster to PostgreSQL v17</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cumulus/docs/upgrade-notes/update-cumulus_id-type-indexes-CUMULUS-3449">Update Cumulus_id Type and Indexes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cumulus/docs/upgrade-notes/upgrade_execution_table_CUMULUS_3320">Upgrade execution table to CUMULUS-3320</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cumulus/docs/upgrade-notes/update_table_indexes_CUMULUS_3792">Update Table Indexes for CUMULUS-3792</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cumulus/docs/upgrade-notes/serverless-v2-upgrade">Upgrading from Aurora Serverless V1 to V2</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cumulus/docs/upgrade-notes/upgrade-terraform-1.12">Upgrade to Terraform 1.12</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cumulus/docs/upgrade-notes/archived_column_indexing">Add and Index Archived Column</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cumulus/docs/upgrade-notes/update-granules-to-include-producer_granule_id">Update granules to include producer_granule_id</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="true" href="/cumulus/docs/category/external-contributions">External Contributions</a><button aria-label="Toggle the collapsible sidebar category &#x27;External Contributions&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cumulus/docs/external-contributions/">External Contributions</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="true" href="/cumulus/docs/data-cookbooks/about-cookbooks">Data Cookbooks</a><button aria-label="Toggle the collapsible sidebar category &#x27;Data Cookbooks&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/cumulus/docs/data-cookbooks/about-cookbooks">About Cookbooks</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/cumulus/docs/category/cookbooks">Cookbooks</a><button aria-label="Toggle the collapsible sidebar category &#x27;Cookbooks&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="true" href="/cumulus/docs/operator-docs/about-operator-docs">Operator Docs</a><button aria-label="Toggle the collapsible sidebar category &#x27;Operator Docs&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/cumulus/docs/category/configuration-1">Configuration</a><button aria-label="Toggle the collapsible sidebar category &#x27;Configuration&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/cumulus/docs/category/operations">Operations</a><button aria-label="Toggle the collapsible sidebar category &#x27;Operations&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/cumulus/docs/category/common-use-cases">Common Use Cases</a><button aria-label="Toggle the collapsible sidebar category &#x27;Common Use Cases&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/cumulus/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/cumulus/docs/category/features"><span itemprop="name">Features</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Granule Uniquification Feature</span><meta itemprop="position" content="2"></li></ul></nav><span class="theme-doc-version-badge badge badge--secondary">Version: v21.2.0</span><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Granule Uniquification Feature</h1></header><h2 class="anchor anchorWithStickyNavbar_LWe7" id="overview"><strong>Overview</strong><a href="#overview" class="hash-link" aria-label="Direct link to overview" title="Direct link to overview">​</a></h2><p>The Granule Uniquification feature in Cumulus allows for the ingestion and management of multiple granules that share the same <code>granuleId</code> but belong to different collections. This is achieved by creating a unique <code>granuleId</code> for each granule and storing the original, non-unique identifier in a new field called <code>producerGranuleId</code>.</p><p>This feature is critical for systems migrating from ECS and other workflows where <code>granuleId</code> may not be globally unique.    Existing workflows that have no need for this feature should be compatible with no changes, however the end result will be the <code>granuleId</code> and <code>producerGranuleId</code> will be set to the same value if producerGranuleId is not specified.</p><p>This feature was added in Cumulus version 21, this document provides an overview of the feature and high level changes associated with the feature from previous versions.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="technical-approach">Technical Approach<a href="#technical-approach" class="hash-link" aria-label="Direct link to Technical Approach" title="Direct link to Technical Approach">​</a></h2><p>The changes included with this feature make updates to the Cumulus database schema, granule read/write/reporting components and workflow task components.</p><p>The intent is to modify the Cumulus database and framework to handle tracking both a unique identifier <code>granuleId</code> and provide a granule object field <code>producerGranuleId</code> that tracks an identifier from the data producer/provider that <em>may not</em> be unique.</p><p>In concert with those updates, Cumulus task components that generate granule objects have been updated to optionally be configured to &#x27;uniquify&#x27; granule objects by generating a unique <code>granuleId</code> and storing the original <code>granuleId</code> value in the <code>producerGranuleId</code> field.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="adding-uniquification-to-ingest-workflows"><em>Adding &#x27;uniquification&#x27; to Ingest Workflows</em><a href="#adding-uniquification-to-ingest-workflows" class="hash-link" aria-label="Direct link to adding-uniquification-to-ingest-workflows" title="Direct link to adding-uniquification-to-ingest-workflows">​</a></h3><p>The process of updating or creating an ingest workflow that makes use of this feature should follow the following high-level guidelines:</p><ul><li><p>If providers/pre-ingest processing provides <code>producerGranuleId</code> as part of the granule object and pre-uniquifies the graunleId, Core task components will &#x27;do the right thing&#x27; out of the box.</p></li><li><p>Ingest workflows that have incoming granules that have only granuleId populated will need to make use of the updated Cumulus workflow task components <em>or</em> make updates to other in-use functions to make the granuleId unique  as appropriate.  For details on this, please see the following:</p><ul><li><p><a href="/cumulus/docs/features/granule-id-hashing-approach">hashing approach document</a> for details on the approach Cumulus components that create a <code>granuleId</code> are using.  Please also review the added task component</p></li><li><p><a href="https://github.com/nasa/cumulus/blob/master/tasks/add-unique-granule-id/README.md" target="_blank" rel="noopener noreferrer"><code>AddUniqueGranuleId</code></a> that can be utilized in workflows to update a granule with a unique <code>granuleId</code>, saving the &#x27;original&#x27; as <code>producerGranuleId</code>.</p></li><li><p><a href="#updated-workflow-task-component-modifications">Updated Workflow Task Component Modifications</a></p></li></ul></li><li><p>Workflows that <em>start</em> with a Cumulus message (<em>not</em> a CNM message or other format) with a payload containing granules but intend to change the ID as part of the workflow will need to reconfigure Cumulus to not report the initial granules prior to workflow steps that update the granule to have a unique Id and <em>optionally</em> update the workflow to report them as running following that uniquification using <code>SfSqsReportTask</code>.  See <a href="/cumulus/docs/features/record_write_options">Record Write Options feature doc</a> for more information.</p></li></ul><p><strong><em>Important</em></strong>: User task components, particularly any that re-implement core reference tasks, must be evaluated carefully to ensure consistent behavior in instances where the <code>granuleId</code> has been modified.</p><p>The following diagram shows expected flow and potential modification considerations for a typical ingest flow, with orange being components that may need modification/update to make use of this feature, and green representing updated Core task components:</p><hr><p><img loading="lazy" alt="Workflow Impacts" src="/cumulus/assets/images/granule_uniqification_updates-a96807d448f0ff540ccf5f2497803d53.png" width="1579" height="1807" class="img_ev3q"></p><hr><h3 class="anchor anchorWithStickyNavbar_LWe7" id="uniquification-methodology"><strong>Uniquification Methodology</strong><a href="#uniquification-methodology" class="hash-link" aria-label="Direct link to uniquification-methodology" title="Direct link to uniquification-methodology">​</a></h3><p>Optimally, adding a <code>uniqueGranuleId</code> and populating a relevant <code>producerGranuleId</code> in incoming granules should be done prior to ingest into Cumulus.  Cumulus maintained workflow tasks have been updated to handle incoming messages with <code>producerGranuleId</code> and <code>granuleId</code> appropriately.</p><p>If that&#x27;s not possible due to filename based discovery ingest, or provider process restrictions, the updated task components allow an in-workflow approach to making granuleIds unique.</p><p>When a workflow is configured to utilize any of the modified tasks that generate a unique ID, Cumulus workflow tasks use a hashing algorithm to generate a unique suffix that is appended to the original <code>granuleId</code>. This process is handled by the <code>add-unique-granule-id</code> task, is integrated into some tasks (e.g. <code>parse_pdr</code>), or relevant user tasks can be updated  as well.</p><p>The recommended algorithm generates an MD5 hash of the granule&#x27;s <code>collectionId</code> (and optionally a timestamp) and appends a truncated version of this hash to the <code>producerGranuleId</code> to create the new unique <code>granuleId</code>.</p><p>The process Cumulus Core uses to generate a unique <code>granuleId</code> can be found in the <a href="https://github.com/nasa/cumulus/blob/master/packages/ingest/src/granule.ts" target="_blank" rel="noopener noreferrer"><code>generateUniqueGranuleId</code> function</a>.</p><p>For more details on the algorithm and for implementations in other languages, see the <a href="/cumulus/docs/features/granule-id-hashing-approach">Hashing approach document</a></p><p>There is no requirement to utilize Core&#x27;s algorithm, as the workflow framework imposes no constraints outside of ensuring <code>producerGranuleId</code> is populated by a default, <em>however</em> if customization is desired, care should be taken to ensure that unique identification schemes are chosen such that unexpected collisions between granules do not occur system-wide.</p><p>To make the process easier, Cumulus Core also provides a Task Component that will uniquely identify each Granule in a payload and return a modified Granule object containing a unique <code>granuleId</code> and a <code>producerGranuleId</code> containing the original <code>granuleId</code> - <a href="https://github.com/nasa/cumulus/blob/master/tasks/add-unique-granule-id/README.md" target="_blank" rel="noopener noreferrer"><code>AddUniqueGranuleId</code></a></p><hr><h3 class="anchor anchorWithStickyNavbar_LWe7" id="external-impacts">External Impacts<a href="#external-impacts" class="hash-link" aria-label="Direct link to External Impacts" title="Direct link to External Impacts">​</a></h3><p>Deploying a version of Cumulus with this feature enabled will result in the following impacts to downstream ecosystem as of when this document was last updated:</p><ul><li>CMR - Exported CMR metadata will now have UMMG/XML appropriate metadata populating the <code>ProducerGranuleId</code> in workflows that make use of the <code>Update Granules CMR Metadata File Links</code> task.   For more information/specifics see the <a href="https://github.com/nasa/cumulus/blob/master/tasks/update-granules-cmr-metadata-file-links/README.md" target="_blank" rel="noopener noreferrer">task README</a></li><li>Metrics - Granule objects newly ingested/updated will have the <code>producerGranuleId</code> field populated</li><li>Lzards - Granules ingested using the updated task component will now have <code>producerGranuleId</code> field populated as part of the LZARDS metadata.</li><li>Orca - no impacts, pending Orca updates that make use of the new field</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="migration-from-prior-versions">Migration From Prior Versions<a href="#migration-from-prior-versions" class="hash-link" aria-label="Direct link to Migration From Prior Versions" title="Direct link to Migration From Prior Versions">​</a></h2><p>Users migrating to the release using this feature will need to migrate their database to make use of and populate the new <code>producer_granule_id</code> field in the Postgres database.  Details of this transition are documented in the <a href="/cumulus/docs/upgrade-notes/update-granules-to-include-producer_granule_id">upgrade notes document</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="existing-workflow-updates">Existing Workflow Updates<a href="#existing-workflow-updates" class="hash-link" aria-label="Direct link to Existing Workflow Updates" title="Direct link to Existing Workflow Updates">​</a></h3><p>For existing ingest workflows/processes not wishing to update, the only functional changes are:</p><ul><li>The framework (post workflow event driven writes) populating a granule&#x27;s <code>producerGranuleId</code> granule field with the value from the <code>granuleId</code> field if one is not provided as part of the ingest workflow.</li><li><a href="https://github.com/nasa/cumulus/blob/master/tasks/update-granules-cmr-metadata-file-links/README.md" target="_blank" rel="noopener noreferrer"><code>UpdateGranulesCmrMetadataFileLinks</code></a> will update the CMR metadata to include the new <code>producerGranuleId</code> in the CMR metadata.</li></ul><hr><h2 class="anchor anchorWithStickyNavbar_LWe7" id="core-changes">Core Changes<a href="#core-changes" class="hash-link" aria-label="Direct link to Core Changes" title="Direct link to Core Changes">​</a></h2><p>The following sections detail changes to Cumulus Core as part of this feature:</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="schema-changes">Schema Changes<a href="#schema-changes" class="hash-link" aria-label="Direct link to Schema Changes" title="Direct link to Schema Changes">​</a></h3><ul><li><strong><code>granuleId</code></strong>: This field remains unchanged in the Core schema, and remains a unique identifier for a granule within the Cumulus system. For granules that originally had a different <code>granuleId</code> via Cumulus Core Task Components or a provider provided identifier, this value will be a combination of the original <code>granuleId</code> and a configurable hash.</li></ul><p>Downstream consumers of Cumulus granule objects should not need to make modifications related to this field.   Core will be moving away from API and other concepts that relate to identifying granule objects by <code>granuleId</code> + <code>collectionId</code> in future versions.</p><ul><li><strong><code>producerGranuleId</code></strong>: This new field is intended to store the original, non-unique producer granule identification value.    This allows for traceability and correlation with the provider&#x27;s source data.</li></ul><p>If using Cumulus Core reference Task Components this value will be retained from the original <code>granuleId</code>.    If using another process, or the provider is providing uniquified IDs, it&#x27;s expected that <code>producerGranuleId</code> will be populated with an appropriate value.</p><p>Downstream consumers of Cumulus granules objects should update to make use of this field if they intend to directly reference <code>producerGranuleId</code> or need to reconcile their records to provider records directly.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="updated-movegranules-duplicate-handling-behavior">Updated <a href="https://github.com/nasa/cumulus/blob/master/tasks/move-granules/README.md" target="_blank" rel="noopener noreferrer"><code>MoveGranules</code></a> &#x27;duplicate&#x27; handling behavior<a href="#updated-movegranules-duplicate-handling-behavior" class="hash-link" aria-label="Direct link to updated-movegranules-duplicate-handling-behavior" title="Direct link to updated-movegranules-duplicate-handling-behavior">​</a></h3><p>Move Granules was <a href="https://github.com/nasa/cumulus/pull/4003" target="_blank" rel="noopener noreferrer">updated</a> to validate if an archive location object collision is due to a same-collection or cross-collection collision.    If the collision is cross-collection, it will fail <em>regardless</em> of the collection configuration, to avoid inadvertent overwrites per requirements in IART-924.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="updated-workflow-task-component-modifications">Updated Workflow Task Component Modifications<a href="#updated-workflow-task-component-modifications" class="hash-link" aria-label="Direct link to Updated Workflow Task Component Modifications" title="Direct link to Updated Workflow Task Component Modifications">​</a></h3><p>The following tasks have been added or updated from prior versions to handle and/or allow conversion to use the new <code>producerGranuleId</code> field for this feature.  All Core workflow tasks that utilize a granule payload were updated to allow for producerGranuleId in the granule object schema, and are not individually listed here if that was the only update.</p><p><strong>Please refer to the README and schemas for the tasks as the source of truth regarding configuration options, this information is true at the time of feature implementation</strong>:</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="added">Added<a href="#added" class="hash-link" aria-label="Direct link to Added" title="Direct link to Added">​</a></h4><h5 class="anchor anchorWithStickyNavbar_LWe7" id="adduniquegranuleid"><a href="https://github.com/nasa/cumulus/blob/master/tasks/add-unique-granule-id/README.md" target="_blank" rel="noopener noreferrer"><code>AddUniqueGranuleId</code></a><a href="#adduniquegranuleid" class="hash-link" aria-label="Direct link to adduniquegranuleid" title="Direct link to adduniquegranuleid">​</a></h5><p>Task was added to provide a &#x27;shim&#x27; option to allow for incoming granules without a producerGranuleId to be <code>uniqified</code> as part of a workflow. A new ID is created and stored as the unique <code>granuleId</code>, with the original ID in the incoming granule retained in the <code>producerGranuleId</code> field.   For details on the hashing approach used in this function see: <a href="/cumulus/docs/features/granule-id-hashing-approach">hashing approach document</a></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="updated">Updated<a href="#updated" class="hash-link" aria-label="Direct link to Updated" title="Direct link to Updated">​</a></h4><h5 class="anchor anchorWithStickyNavbar_LWe7" id="lzardsbackup"><a href="https://github.com/nasa/cumulus/blob/master/tasks/LZARDS-backup/README.md" target="_blank" rel="noopener noreferrer"><code>LzardsBackup</code></a><a href="#lzardsbackup" class="hash-link" aria-label="Direct link to lzardsbackup" title="Direct link to lzardsbackup">​</a></h5><ul><li>Task was updated to include <code>producerGranuleId</code> as part of the LZARDS <code>metadata</code> object</li></ul><h5 class="anchor anchorWithStickyNavbar_LWe7" id="parsepdr"><a href="https://github.com/nasa/cumulus/blob/master/tasks/parse-pdr/README.md" target="_blank" rel="noopener noreferrer"><code>ParsePdr</code></a><a href="#parsepdr" class="hash-link" aria-label="Direct link to parsepdr" title="Direct link to parsepdr">​</a></h5><ul><li>Task was updated to take an optional configuration parameter <code>uniquifyGranules</code> that if set to <code>true</code> will update the granuleId for all found granules to have a unique granule hash appended to the existing ID   (<a href="https://github.com/nasa/cumulus/pull/3983" target="_blank" rel="noopener noreferrer">PR #3968</a>).</li><li>Task was updated to always populate producerGranuleId for the output granule with the incoming producerGranuleId.</li><li>Task was updated to detect duplicate granuleIds and throw an error if uniquification is not enabled.</li></ul><h5 class="anchor anchorWithStickyNavbar_LWe7" id="queuegranules"><a href="https://github.com/nasa/cumulus/blob/master/tasks/queue-granules/README.md" target="_blank" rel="noopener noreferrer"><code>QueueGranules</code></a><a href="#queuegranules" class="hash-link" aria-label="Direct link to queuegranules" title="Direct link to queuegranules">​</a></h5><ul><li>Task was updated to set <code>producerGranuleId</code> to <code>granuleId</code> if not set in the input granules (<a href="https://github.com/nasa/cumulus/pull/3968" target="_blank" rel="noopener noreferrer">PR #3968</a>)</li></ul><h5 class="anchor anchorWithStickyNavbar_LWe7" id="updategranulescmrmetadatafilelinks"><a href="https://github.com/nasa/cumulus/blob/master/tasks/update-granules-cmr-metadata-file-links/README.md" target="_blank" rel="noopener noreferrer"><code>UpdateGranulesCmrMetadataFileLinks</code></a><a href="#updategranulescmrmetadatafilelinks" class="hash-link" aria-label="Direct link to updategranulescmrmetadatafilelinks" title="Direct link to updategranulescmrmetadatafilelinks">​</a></h5><ul><li>Task was updated to always set <code>granuleUR</code> and <code>producerGranuleId</code> in the CMR metadata file based on the passed in granule. (<a href="https://github.com/nasa/cumulus/pull/3997" target="_blank" rel="noopener noreferrer">PR #3997</a>)</li></ul><h5 class="anchor anchorWithStickyNavbar_LWe7" id="filestogranules"><a href="https://github.com/nasa/cumulus/blob/master/tasks/files-to-granules/README.md" target="_blank" rel="noopener noreferrer"><code>FilesToGranules</code></a><a href="#filestogranules" class="hash-link" aria-label="Direct link to filestogranules" title="Direct link to filestogranules">​</a></h5><ul><li>Task was updated to allow <code>producerGranuleId</code> in the granule schema, and added <code>matchFilesWithProducerGranuleId</code> as a configuration flag</li></ul><h3 class="anchor anchorWithStickyNavbar_LWe7" id="updated-cumulus-framework-behaviors">Updated Cumulus Framework Behaviors<a href="#updated-cumulus-framework-behaviors" class="hash-link" aria-label="Direct link to Updated Cumulus Framework Behaviors" title="Direct link to Updated Cumulus Framework Behaviors">​</a></h3><ul><li>The API will now allow for updates/writing of <code>producerGranuleId</code>.    This field is set either to the incoming value in the granule object <em>or</em> defaults to the value for <code>granuleId</code>.</li><li>Granule PUT, GET, PATCH and POST will allow for <code>producerGranuleId</code> to be set.</li><li><code>producerGranuleId</code> will be output from all calls that output a granule object, and update SNS topics will report them to downstream consumers as well</li></ul><h2 class="anchor anchorWithStickyNavbar_LWe7" id="workflow-feature-use">Workflow Feature Use<a href="#workflow-feature-use" class="hash-link" aria-label="Direct link to Workflow Feature Use" title="Direct link to Workflow Feature Use">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="collection-configuration">Collection Configuration<a href="#collection-configuration" class="hash-link" aria-label="Direct link to Collection Configuration" title="Direct link to Collection Configuration">​</a></h3><p>Most of the task Granule uniquification options in the updated task components can be enabled and configured at the collection level using <code>meta</code> , or optionally be provided via workflow configuration or a rule <code>meta</code> field.</p><p>As an example, collection oriented configuration can be achieved in the <a href="https://github.com/nasa/cumulus/blob/master/tasks/add-unique-granule-id/README.md" target="_blank" rel="noopener noreferrer"><code>AddUniqueGranuleId</code></a> implementations by adding the following to the <code>collection.meta</code> object:</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token property">&quot;meta&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;uniquifyGranuleId&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">true</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;hashLength&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token number" style="color:rgb(247, 140, 108)">8</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Once you&#x27;ve done that, you can then add task configuration hooks to the workflow components that need configuration:</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">     </span><span class="token property">&quot;AddUniqueGranuleId&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token property">&quot;Parameters&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token property">&quot;cma&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token property">&quot;event.$&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;$&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token property">&quot;ReplaceConfig&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token property">&quot;Path&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;$.payload&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token property">&quot;TargetPath&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;$.payload&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token property">&quot;task_config&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token property">&quot;hashLength&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;{$.meta.collection.meta.hashLength}&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">          </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>If <code>uniquifyGranuleId</code> is <code>true</code> and the Collection is ingested using a workflow that includes the <code>AddUniqueGranuleId</code> Task (required to update the granuleId), the <code>granuleId</code> will be uniquely generated using the <a href="https://github.com/nasa/cumulus/blob/master/packages/ingest/src/granule.ts" target="_blank" rel="noopener noreferrer"><code>generateUniqueGranuleId</code> function here</a>. The <code>hashLength</code> specifies how many characters the randomized hash contains. More characters offer a greater chance of uniqueness.</p><p><a href="https://github.com/nasa/cumulus/blob/master/example/cumulus-tf/cnm_workflow.asl.json" target="_blank" rel="noopener noreferrer">Here is an example workflow configuration including the AddUniqueGranuleId task.</a></p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="collection-path-considerations">Collection Path Considerations<a href="#collection-path-considerations" class="hash-link" aria-label="Direct link to Collection Path Considerations" title="Direct link to Collection Path Considerations">​</a></h4><div class="theme-admonition theme-admonition-caution alert alert--warning admonition_LlT9"><div class="admonitionHeading_tbUL"><span class="admonitionIcon_kALy"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>caution</div><div class="admonitionContent_S0QG"><p>A Collection that is configured to uniquely identify Granules in this way means that the existing <code>granuleId</code> will change to a unique, hashed value. This is important to consider when building workflows and, in particular, specifying the S3 paths for a Granule&#x27;s Files. <strong><em>This is also true for all workflows that may be run with Granules that have previously had their <code>granuleId</code> uniquely generated</em></strong></p></div></div><p>In a Collection configuration, you can specify the <code>url_path</code> template that will be used to determine the final location of the Collection&#x27;s Files if using the  <code>MoveGranules</code> Task Component.</p><p>If that path contains a <code>granuleId</code> or anything derived from <code>granuleId</code>, notably the CMR Metadata&#x27;s <code>GranuleUR</code>, that path will contain the unique value. An example containing the unique <code>granuleId</code> might look like:</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token property">&quot;url_path&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;{cmrMetadata.Granule.Collection.ShortName}___{cmrMetadata.Granule.Collection.VersionId}/{granule.granuleId}&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>or</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token property">&quot;url_path&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;{cmrMetadata.Granule.Collection.ShortName}___{cmrMetadata.Granule.Collection.VersionId}/{cmrMetadata.Granule.GranuleUR}&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>If that is NOT desirable and using the original, non-unique value is preferred, that is still possible. The Collection would need to be configured to use the <code>producerGranuleId</code>, which represents the original <code>granuleId</code> value without any uniquification, or a completely different value.</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token property">&quot;url_path&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;{cmrMetadata.Granule.Collection.ShortName}___{cmrMetadata.Granule.Collection.VersionId}/{granule.producerGranuleId}/&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Taking it a step further, depending on the workflow configuration, users can specify a default using the <code>defaultTo</code> operation if the <code>producerGranuleId</code> isn&#x27;t available for a given Granule.</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token property">&quot;url_path&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;{cmrMetadata.Granule.Collection.ShortName}___{cmrMetadata.Granule.Collection.VersionId}/{defaultTo(granule.producerGranuleId, granule.granuleId)}&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="workflow-configuration">Workflow Configuration<a href="#workflow-configuration" class="hash-link" aria-label="Direct link to Workflow Configuration" title="Direct link to Workflow Configuration">​</a></h3><p>An additional consideration to configuring the collection to uniquely identify granules is the record writing mechanism in the Cumulus Core framework.</p><p>When a workflow executes, records are written to the Cumulus datastore including <code>execution</code>, <code>granule</code>, and <code>pdr</code> (among others). These records are written and updated to reflect the stages of the workflow execution. Initially a <code>granule</code> (for example) will be written in the <code>running</code> state. As the workflow progresses, that <code>granule</code> will be updated to either <code>completed</code> or <code>failed</code>. This presents a potential issue if the Cumulus workflow is generating a unique ID for the incoming granule as the initial write (a <code>granule</code> written as <code>running</code>) will happen <em>before</em> the workflow task is able to generate the unique ID. The resulting record will reflect the original, non-unique <code>granuleId</code> e.g.</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;granuleId&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;L2_HR_PIXC_A&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>After the Granule has been assigned a unique <code>granuleId</code> in the <code>add-unique-granuleID</code> task the payload will look similar to this:</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;granuleId&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;L2_HR_PIXC_A_zHGdMM&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token property">&quot;producerGranuleId&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;L2_HR_PIXC_A&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Where the <code>granuleId</code> is now a unique value and the original <code>granuleId</code> is stored as <code>producerGranuleId</code>.</p><p>In this case, it may be desirable to to <em>skip</em> that initial record write as we do not want to attempt to write a granule with a <code>granuleId</code> that 1. may conflict with another and 2. does not represent the final <code>granuleId</code>, which could result in extraneous records.</p><p>To configure the workflow to skip that initial <code>granule</code> write (when the granule is in the <code>running</code> state), the workflow can be configured using the <code>sf_event_sqs_to_db_records_types</code> block in the Terraform configuration. In this example using the <code>IngestAndPublishGranule</code> workflow, the configuration would be:</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    sf_event_sqs_to_db_records_types </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token maybe-class-name">IngestAndPublishGranule</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            running </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;execution&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;pdr&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><code>execution</code> and <code>pdr</code> records will be written in the <code>running</code> state. <code>granule</code> will not because it is not specified. As of this writing, <code>execution</code> and <code>pdr</code> must always be written. <code>granule</code> is currently the only record type that can be skipped in this way. This behavior is subject to change in the future, see below documentation for the most current Record Write Options.</p><p><strong>Important</strong>: If skipping the initial Granule record write is desired in a <strong>PDR workflow</strong>, additional modification may be required. See <a href="/cumulus/docs/features/record_write_options">the Record Write Options documentation</a> for details on this use case as well as general documentation on skipping record writes.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="workflow-examples">Workflow Examples<a href="#workflow-examples" class="hash-link" aria-label="Direct link to Workflow Examples" title="Direct link to Workflow Examples">​</a></h3><h4 class="anchor anchorWithStickyNavbar_LWe7" id="sipspdr-based-workflow">SIPS/PDR Based Workflow<a href="#sipspdr-based-workflow" class="hash-link" aria-label="Direct link to SIPS/PDR Based Workflow" title="Direct link to SIPS/PDR Based Workflow">​</a></h4><p>Documentation in the <a href="/cumulus/docs/data-cookbooks/sips-workflow">&quot;SIPS&quot; Workflow Cookbook</a> outlines an example usage of <code>DiscoverPDRs</code>, <code>QueuePDRs</code> and <code>ParsePDR</code> in a workflow.  As mentioned above, uniquification should be a simple matter of configuring <code>ParsePDR</code> with appropriate uniquification configuration values.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="cnmkinesis-style-ingest-workflow">CNM/Kinesis Style Ingest Workflow<a href="#cnmkinesis-style-ingest-workflow" class="hash-link" aria-label="Direct link to CNM/Kinesis Style Ingest Workflow" title="Direct link to CNM/Kinesis Style Ingest Workflow">​</a></h4><p>Cumulus&#x27;s integration deployment provides an example of a <a href="https://github.com/nasa/cumulus/blob/master/example/cumulus-tf/cnm_workflow.asl.json" target="_blank" rel="noopener noreferrer"><code>CNM</code> style workflow</a> which is detailed in a <a href="/cumulus/docs/data-cookbooks/cnm-workflow">&quot;cookbook&quot;</a> that can be used for both uniquified and non-uniquified collections.   This workflow is a typical single-workflow ingest using a Kinesis stream that is triggering workflows with a CNM message, but it uses a choice state to configurably use the <a href="https://github.com/nasa/cumulus/blob/master/tasks/add-unique-granule-id/README.md" target="_blank" rel="noopener noreferrer"><code>AddUniqueGranuleId</code></a> task in the workflow for collections that are configured to handle this in-workflow:</p><p><img loading="lazy" alt="CNM Workflow Example" src="/cumulus/assets/images/stepfunctions_graph-d2c558e6cba2f82960a345bc59ca5ff3.png" width="1181" height="1401" class="img_ev3q"></p><p>Downstream steps have the relevant configuration values wired in from the collection configuration for steps that require it.  For example the integration test &quot;ProcessingStep&quot;:</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token property">&quot;task_config&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token property">&quot;bucket&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;{$.meta.buckets.private.name}&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token property">&quot;collection&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;{$.meta.collection}&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token property">&quot;cmrMetadataFormat&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;{$.meta.cmrMetadataFormat}&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token property">&quot;additionalUrls&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;{$.meta.additionalUrls}&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token property">&quot;matchFilesWithProducerGranuleId&quot;</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;{$.meta.collection.meta.uniquifyGranuleId}&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"></div><div class="col lastUpdated_vwxv"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2026-01-08T15:46:41.000Z">Jan 8, 2026</time></b> by <b>Naga Nages</b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/cumulus/docs/features/replay-archived-sqs-messages"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">How to replay SQS messages archived in S3</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/cumulus/docs/features/change_granule_collection"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Cumulus Change Granule Collections</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#overview" class="table-of-contents__link toc-highlight"><strong>Overview</strong></a></li><li><a href="#technical-approach" class="table-of-contents__link toc-highlight">Technical Approach</a><ul><li><a href="#adding-uniquification-to-ingest-workflows" class="table-of-contents__link toc-highlight"><em>Adding &#39;uniquification&#39; to Ingest Workflows</em></a></li><li><a href="#uniquification-methodology" class="table-of-contents__link toc-highlight"><strong>Uniquification Methodology</strong></a></li><li><a href="#external-impacts" class="table-of-contents__link toc-highlight">External Impacts</a></li></ul></li><li><a href="#migration-from-prior-versions" class="table-of-contents__link toc-highlight">Migration From Prior Versions</a><ul><li><a href="#existing-workflow-updates" class="table-of-contents__link toc-highlight">Existing Workflow Updates</a></li></ul></li><li><a href="#core-changes" class="table-of-contents__link toc-highlight">Core Changes</a><ul><li><a href="#schema-changes" class="table-of-contents__link toc-highlight">Schema Changes</a></li><li><a href="#updated-movegranules-duplicate-handling-behavior" class="table-of-contents__link toc-highlight">Updated <code>MoveGranules</code> &#39;duplicate&#39; handling behavior</a></li><li><a href="#updated-workflow-task-component-modifications" class="table-of-contents__link toc-highlight">Updated Workflow Task Component Modifications</a></li><li><a href="#updated-cumulus-framework-behaviors" class="table-of-contents__link toc-highlight">Updated Cumulus Framework Behaviors</a></li></ul></li><li><a href="#workflow-feature-use" class="table-of-contents__link toc-highlight">Workflow Feature Use</a><ul><li><a href="#collection-configuration" class="table-of-contents__link toc-highlight">Collection Configuration</a></li><li><a href="#workflow-configuration" class="table-of-contents__link toc-highlight">Workflow Configuration</a></li><li><a href="#workflow-examples" class="table-of-contents__link toc-highlight">Workflow Examples</a></li></ul></li></ul></div></div></div></div></main></div></div></div>
<script src="/cumulus/assets/js/runtime~main.38756b2a.js"></script>
<script src="/cumulus/assets/js/main.ff8a21e5.js"></script>
</body>
</html>