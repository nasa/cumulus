"use strict";(self.webpackChunk_cumulus_website=self.webpackChunk_cumulus_website||[]).push([[48966],{15680(e,t,n){n.d(t,{xA:()=>u,yg:()=>d});var a=n(296540);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach(function(t){o(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function p(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var l=a.createContext({}),c=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},u=function(e){var t=c(e.components);return a.createElement(l.Provider,{value:t},e.children)},s={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef(function(e,t){var n=e.components,o=e.mdxType,r=e.originalType,l=e.parentName,u=p(e,["components","mdxType","originalType","parentName"]),m=c(n),d=o,y=m["".concat(l,".").concat(d)]||m[d]||s[d]||r;return n?a.createElement(y,i(i({ref:t},u),{},{components:n})):a.createElement(y,i({ref:t},u))});function d(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var r=n.length,i=new Array(r);i[0]=m;var p={};for(var l in t)hasOwnProperty.call(t,l)&&(p[l]=t[l]);p.originalType=e,p.mdxType="string"==typeof e?e:o,i[1]=p;for(var c=2;c<r;c++)i[c]=n[c];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},129330(e,t,n){n.r(t),n.d(t,{assets:()=>u,contentTitle:()=>l,default:()=>d,frontMatter:()=>p,metadata:()=>c,toc:()=>s});var a=n(58168),o=n(198587),r=(n(296540),n(15680)),i=["components"],p={id:"python-best-practices"},l="Python Best Practices",c={unversionedId:"development/python-best-practices",id:"development/python-best-practices",title:"Python Best Practices",description:"Package Management",source:"@site/../docs/development/python-best-practices.md",sourceDirName:"development",slug:"/development/python-best-practices",permalink:"/cumulus/docs/next/development/python-best-practices",draft:!1,tags:[],version:"current",lastUpdatedBy:"Paul Pilone",lastUpdatedAt:1768594659,formattedLastUpdatedAt:"Jan 16, 2026",frontMatter:{id:"python-best-practices"},sidebar:"docs",previous:{title:"Typescript Best Practices",permalink:"/cumulus/docs/next/development/typescript-best-practices"},next:{title:"Integrator Guide",permalink:"/cumulus/docs/next/category/integrator-guide"}},u={},s=[{value:"Package Management",id:"package-management",level:2},{value:"Initializing a New Python Project",id:"initializing-a-new-python-project",level:3},{value:"Migrating a Current Python Project",id:"migrating-a-current-python-project",level:3},{value:"Updating PyProject.toml",id:"updating-pyprojecttoml",level:3},{value:"Code Quality and Format",id:"code-quality-and-format",level:2},{value:"Configuring Ruff",id:"configuring-ruff",level:3},{value:"Configuring MyPy",id:"configuring-mypy",level:3},{value:"Code Auditing",id:"code-auditing",level:2},{value:"Code Testing and Coverage",id:"code-testing-and-coverage",level:2},{value:"Code Documentation",id:"code-documentation",level:2}],m={toc:s};function d(e){var t=e.components,n=(0,o.A)(e,i);return(0,r.yg)("wrapper",(0,a.A)({},m,n,{components:t,mdxType:"MDXLayout"}),(0,r.yg)("h1",{id:"python-best-practices"},"Python Best Practices"),(0,r.yg)("h2",{id:"package-management"},"Package Management"),(0,r.yg)("p",null,"Package and project management in Python is managed using ",(0,r.yg)("a",{parentName:"p",href:"https://docs.astral.sh/uv/"},"uv"),". The sections below provide a brief overview of starting a new project with ",(0,r.yg)("inlineCode",{parentName:"p"},"uv")," or migrating a current project into using ",(0,r.yg)("inlineCode",{parentName:"p"},"uv"),"."),(0,r.yg)("h3",{id:"initializing-a-new-python-project"},"Initializing a New Python Project"),(0,r.yg)("p",null,"To start a new project or module, under the proper directory run ",(0,r.yg)("inlineCode",{parentName:"p"},"uv init <name>")," where ",(0,r.yg)("inlineCode",{parentName:"p"},"<name>")," is the name of the project or module. The init will create the ",(0,r.yg)("em",{parentName:"p"},(0,r.yg)("inlineCode",{parentName:"em"},"<name>")," folder"),", ",(0,r.yg)("em",{parentName:"p"},"pyproject.toml"),", ",(0,r.yg)("em",{parentName:"p"},"README.md"),", and ",(0,r.yg)("em",{parentName:"p"},"main.py")," files. It is recommended to layout the structure of the code like the image below. The ",(0,r.yg)("em",{parentName:"p"},"src")," folder contains the code for the module, library, or application. The ",(0,r.yg)("em",{parentName:"p"},"tests")," folder contains the unit and integration tests for the application. The ",(0,r.yg)("em",{parentName:"p"},"bin")," folder contains utility scripts for building, testing, deploying or performing other utilities with the code. The ",(0,r.yg)("em",{parentName:"p"},"deploy")," folder contains the infrastructure as code for deploying the project or task into AWS."),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-text"},".\n\u2514\u2500\u2500 python-reference-task\n    \u251c\u2500\u2500 bin\n    \u2502   \u2514\u2500\u2500 package.sh\n    \u251c\u2500\u2500 Dockerfile\n    \u251c\u2500\u2500 package.json\n    \u251c\u2500\u2500 pyproject.toml\n    \u251c\u2500\u2500 README.md\n    \u251c\u2500\u2500 src\n    \u2502   \u251c\u2500\u2500 main.py\n    \u2502   \u2514\u2500\u2500 python_reference_task\n    \u2502       \u251c\u2500\u2500 __init__.py\n    \u2502       \u251c\u2500\u2500 schema.py\n    \u2502       \u2514\u2500\u2500 task.py\n    \u251c\u2500\u2500 deploy\n    \u2502   \u251c\u2500\u2500 main.tf\n    \u2502   \u251c\u2500\u2500 output.tf\n    \u2502   \u2514\u2500\u2500 variables.tf\n    \u2514\u2500\u2500 tests\n        \u251c\u2500\u2500 integration_tests\n        \u2514\u2500\u2500 unit_tests\n            \u251c\u2500\u2500 __init__.py\n            \u251c\u2500\u2500 python_reference_task\n            \u2502   \u251c\u2500\u2500 __init__.py\n            \u2502   \u2514\u2500\u2500 test_task.py\n            \u2514\u2500\u2500 test_main.py\n")),(0,r.yg)("h3",{id:"migrating-a-current-python-project"},"Migrating a Current Python Project"),(0,r.yg)("p",null,"To migrate a current Python project to uv, perform the following steps."),(0,r.yg)("ol",null,(0,r.yg)("li",{parentName:"ol"},(0,r.yg)("inlineCode",{parentName:"li"},"cd")," to the app directory."),(0,r.yg)("li",{parentName:"ol"},"Run the ",(0,r.yg)("inlineCode",{parentName:"li"},"uv init")," command to create the ",(0,r.yg)("em",{parentName:"li"},"pyproject.toml")," file."),(0,r.yg)("li",{parentName:"ol"},"Run the ",(0,r.yg)("inlineCode",{parentName:"li"},"uv add -r requirements.txt")," to update the ",(0,r.yg)("em",{parentName:"li"},"pyproject.toml")," and lock dependency versions in the ",(0,r.yg)("em",{parentName:"li"},"uv.lock")," files."),(0,r.yg)("li",{parentName:"ol"},"Remove the ",(0,r.yg)("em",{parentName:"li"},"requirements.txt")," file as the requirements are now tracked by ",(0,r.yg)("inlineCode",{parentName:"li"},"uv"),".")),(0,r.yg)("h3",{id:"updating-pyprojecttoml"},"Updating PyProject.toml"),(0,r.yg)("p",null,"As a minimum, the following fields in the ",(0,r.yg)("em",{parentName:"p"},"pyproject.toml")," file should be filled out completely, as seen below."),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"Under ",(0,r.yg)("inlineCode",{parentName:"li"},"project"),(0,r.yg)("ul",{parentName:"li"},(0,r.yg)("li",{parentName:"ul"},"name"),(0,r.yg)("li",{parentName:"ul"},"version"),(0,r.yg)("li",{parentName:"ul"},"description"),(0,r.yg)("li",{parentName:"ul"},"readme"),(0,r.yg)("li",{parentName:"ul"},"requires-python"))),(0,r.yg)("li",{parentName:"ul"},"Under ",(0,r.yg)("inlineCode",{parentName:"li"},"project.urls"),(0,r.yg)("ul",{parentName:"li"},(0,r.yg)("li",{parentName:"ul"},"homepage"),(0,r.yg)("li",{parentName:"ul"},"documentation"),(0,r.yg)("li",{parentName:"ul"},"repository")))),(0,r.yg)("p",null,"Below is an example of a minimally filled out ",(0,r.yg)("em",{parentName:"p"},"pyproject.toml")," file."),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-toml"},'[project]\nname = "example-app"\nversion = "0.0.1"\ndescription = "This is a long description of what the app is and what it does."\nreadme = "README.md"\nrequires-python = ">=3.14"\n\n[project.urls]\nhomepage = "https://github.com/nasa/cumulus/blob/master/example-app/"\ndocumentation = "https://github.com/nasa/cumulus/blob/master/example-app/README.md"\nrepository = "https://github.com/nasa/cumulus.git"\n\n')),(0,r.yg)("h2",{id:"code-quality-and-format"},"Code Quality and Format"),(0,r.yg)("p",null,"Python projects in this repo leverage ",(0,r.yg)("a",{parentName:"p",href:"https://docs.astral.sh/ruff/"},"ruff")," for code linting and formatting and ",(0,r.yg)("a",{parentName:"p",href:"https://mypy.readthedocs.io/en/stable/"},"mypy")," for type checking."),(0,r.yg)("p",null,"To add ",(0,r.yg)("inlineCode",{parentName:"p"},"ruff")," to the project run the command ",(0,r.yg)("inlineCode",{parentName:"p"},"uv tool install ruff"),". To add ",(0,r.yg)("inlineCode",{parentName:"p"},"mypy")," to the project, run ",(0,r.yg)("inlineCode",{parentName:"p"},"uv add --dev mypy")),(0,r.yg)("p",null,"To check the quality of your code run ",(0,r.yg)("inlineCode",{parentName:"p"},"npm run lint"),". To run the checks individually use the following commands."),(0,r.yg)("ul",null,(0,r.yg)("li",{parentName:"ul"},"Python linting - ",(0,r.yg)("inlineCode",{parentName:"li"},"uvx ruff check .")),(0,r.yg)("li",{parentName:"ul"},"Python formatting - ",(0,r.yg)("inlineCode",{parentName:"li"},"uvx ruff format --diff .")),(0,r.yg)("li",{parentName:"ul"},"Python type checking - ",(0,r.yg)("inlineCode",{parentName:"li"},'uv run mypy $(find . -type f -name "*.py")'))),(0,r.yg)("h3",{id:"configuring-ruff"},"Configuring Ruff"),(0,r.yg)("p",null,"The Ruff configuration found in the ",(0,r.yg)("a",{parentName:"p",href:"https://github.com/nasa/cumulus/blob/master/pyproject.toml"},"root pyproject.toml file")," contains the ruff configuration for the project. Ruff configuration can be extended or overridden using the ",(0,r.yg)("a",{parentName:"p",href:"https://docs.astral.sh/ruff/settings/#extend"},"extend feature"),"."),(0,r.yg)("admonition",{title:"Extend Feature",type:"warning"},(0,r.yg)("p",{parentName:"admonition"},"Use of the extend feature for ruff should generally be avoided so that the current global configuration is applied consistently everywhere. Only use the extend feature for when absolutely necessary, providing ample documentation for the deviation from the current global settings.")),(0,r.yg)("h3",{id:"configuring-mypy"},"Configuring MyPy"),(0,r.yg)("p",null,"The MyPy configuration can be found in the ",(0,r.yg)("a",{parentName:"p",href:"https://github.com/nasa/cumulus/blob/master/pyproject.toml"},"root pyproject.toml file"),"."),(0,r.yg)("h2",{id:"code-auditing"},"Code Auditing"),(0,r.yg)("p",null,"Python projects in this repo use ",(0,r.yg)("a",{parentName:"p",href:"https://github.com/owenlamont/uv-secure"},"uv-secure")," to check for code security."),(0,r.yg)("p",null,"To add ",(0,r.yg)("inlineCode",{parentName:"p"},"uv-secure")," to the project, run the command ",(0,r.yg)("inlineCode",{parentName:"p"},"uv tool install uv-secure"),"."),(0,r.yg)("p",null,"To audit the dependencies of your code run ",(0,r.yg)("inlineCode",{parentName:"p"},"npm run audit")," or ",(0,r.yg)("inlineCode",{parentName:"p"},"uvx uv-secure"),". Configuration for ",(0,r.yg)("inlineCode",{parentName:"p"},"uv-secure")," is found in the ",(0,r.yg)("a",{parentName:"p",href:"https://github.com/nasa/cumulus/blob/master/pyproject.toml"},"root pyproject.toml file"),"."),(0,r.yg)("h2",{id:"code-testing-and-coverage"},"Code Testing and Coverage"),(0,r.yg)("p",null,"The testing framework for python projects in ",(0,r.yg)("a",{parentName:"p",href:"https://docs.pytest.org/en/stable/"},"pytest"),"."),(0,r.yg)("p",null,"To add ",(0,r.yg)("inlineCode",{parentName:"p"},"pytest")," to the project run the command ",(0,r.yg)("inlineCode",{parentName:"p"},"uv add --dev pytest pytest-cov"),"."),(0,r.yg)("p",null,"To configure ",(0,r.yg)("inlineCode",{parentName:"p"},"pytest")," add commandline options for ",(0,r.yg)("inlineCode",{parentName:"p"},"pytest")," in the ",(0,r.yg)("inlineCode",{parentName:"p"},"pyproject.toml")," file like the example seen below. More ",(0,r.yg)("inlineCode",{parentName:"p"},"pytest")," options are available in the ",(0,r.yg)("a",{parentName:"p",href:"https://docs.pytest.org/en/stable/reference/reference.html#ini-options-ref"},"documentation"),". Additional options for ",(0,r.yg)("inlineCode",{parentName:"p"},"pytest-cov")," are found in the ",(0,r.yg)("a",{parentName:"p",href:"https://pytest-cov.readthedocs.io/en/latest/config.html"},"pytest-cov documentation"),"."),(0,r.yg)("pre",null,(0,r.yg)("code",{parentName:"pre",className:"language-toml"},'[tool.pytest]\nminversion = "9.0"\naddopts = [\n    "--maxfail=1",\n    "-ra",\n    "-q",\n    "--cov=myproject",\n    "--cov-report=lcov:.nyc_output"\n]\ntestpaths = [\n    "tests",\n]\n')),(0,r.yg)("p",null,"To run ",(0,r.yg)("inlineCode",{parentName:"p"},"pytest")," use the command ",(0,r.yg)("inlineCode",{parentName:"p"},"uv run pytest"),"."),(0,r.yg)("p",null,"In addition to ",(0,r.yg)("inlineCode",{parentName:"p"},"pytest"),", developers should strongly consider using ",(0,r.yg)("a",{parentName:"p",href:"https://docs.getmoto.org/en/latest/"},"moto")," for mocking AWS services within code when using the boto3 SDK and the AWS API. The ",(0,r.yg)("a",{parentName:"p",href:"https://github.com/getmoto/moto?tab=readme-ov-file"},"moto")," library is the preferred library for performing unit tests against AWS mocked services."),(0,r.yg)("h2",{id:"code-documentation"},"Code Documentation"),(0,r.yg)("p",null,"It is expected that whenever possible the code functionality should be documented via a README that includes critical usage and development information such as inputs, outputs, internal and external dependencies, use cases, and critical development information. In addition, the README markdown file should utilize the proper template and conform with ",(0,r.yg)("a",{parentName:"p",href:"docs/development/quality-and-coverage.md"},"markdown quality standards"),"."))}d.isMDXComponent=!0}}]);