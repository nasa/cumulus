"use strict";(self.webpackChunk_cumulus_website=self.webpackChunk_cumulus_website||[]).push([[20911],{15680:(e,n,t)=>{t.d(n,{xA:()=>c,yg:()=>g});var r=t(296540);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),t.push.apply(t,r)}return t}function i(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(Object(t),!0).forEach(function(n){a(e,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})}return e}function u(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var s=r.createContext({}),l=function(e){var n=r.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):i(i({},n),e)),t},c=function(e){var n=l(e.components);return r.createElement(s.Provider,{value:n},e.children)},p="mdxType",m={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},d=r.forwardRef(function(e,n){var t=e.components,a=e.mdxType,o=e.originalType,s=e.parentName,c=u(e,["components","mdxType","originalType","parentName"]),p=l(t),d=a,g=p["".concat(s,".").concat(d)]||p[d]||m[d]||o;return t?r.createElement(g,i(i({ref:n},c),{},{components:t})):r.createElement(g,i({ref:n},c))});function g(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var o=t.length,i=new Array(o);i[0]=d;var u={};for(var s in n)hasOwnProperty.call(n,s)&&(u[s]=n[s]);u.originalType=e,u[p]="string"==typeof e?e:a,i[1]=u;for(var l=2;l<o;l++)i[l]=t[l];return r.createElement.apply(null,i)}return r.createElement.apply(null,t)}d.displayName="MDXCreateElement"},560580:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>s,default:()=>g,frontMatter:()=>u,metadata:()=>l,toc:()=>p});var r=t(58168),a=t(198587),o=(t(296540),t(15680)),i=["components"],u={id:"naming-executions",title:"Naming Executions",hide_title:!1},s=void 0,l={unversionedId:"operator-docs/naming-executions",id:"version-v9.0.0/operator-docs/naming-executions",title:"Naming Executions",description:"By default, Cumulus will assign a random name to workflow executions. If",source:"@site/versioned_docs/version-v9.0.0/operator-docs/naming-executions.md",sourceDirName:"operator-docs",slug:"/operator-docs/naming-executions",permalink:"/cumulus/docs/v9.0.0/operator-docs/naming-executions",draft:!1,tags:[],version:"v9.0.0",lastUpdatedBy:"jennyhliu",lastUpdatedAt:1678406688,formattedLastUpdatedAt:"Mar 10, 2023",frontMatter:{id:"naming-executions",title:"Naming Executions",hide_title:!1},sidebar:"Operator Docs",previous:{title:"CMR Operations",permalink:"/cumulus/docs/v9.0.0/operator-docs/cmr-operations"},next:{title:"Re-running workflow executions",permalink:"/cumulus/docs/v9.0.0/troubleshooting/rerunning-workflow-executions"}},c={},p=[{value:"Naming executions triggered by rules",id:"naming-executions-triggered-by-rules",level:2},{value:"Naming executions enqueued by the QueueGranules and QueuePdrs tasks",id:"naming-executions-enqueued-by-the-queuegranules-and-queuepdrs-tasks",level:2},{value:"Setting executionNamePrefix config for QueueGranules using rule.meta",id:"setting-executionnameprefix-config-for-queuegranules-using-rulemeta",level:3}],m={toc:p},d="wrapper";function g(e){var n=e.components,t=(0,a.A)(e,i);return(0,o.yg)(d,(0,r.A)({},m,t,{components:n,mdxType:"MDXLayout"}),(0,o.yg)("p",null,"By default, Cumulus will assign a random name to workflow executions. If\ndesired, though, a configurable prefix can be added to those execution names."),(0,o.yg)("h2",{id:"naming-executions-triggered-by-rules"},"Naming executions triggered by rules"),(0,o.yg)("p",null,"Rules now have an optional ",(0,o.yg)("inlineCode",{parentName:"p"},"executionNamePrefix")," property. If set, any workflows\ntriggered directly by that rule will have an execution name that starts with\nthat prefix."),(0,o.yg)("h2",{id:"naming-executions-enqueued-by-the-queuegranules-and-queuepdrs-tasks"},"Naming executions enqueued by the QueueGranules and QueuePdrs tasks"),(0,o.yg)("p",null,"The ",(0,o.yg)("inlineCode",{parentName:"p"},"QueueGranules")," and ",(0,o.yg)("inlineCode",{parentName:"p"},"QueuePdrs")," tasks add executions to a queue to be run\nlater. These two tasks now support an optional config property called\n",(0,o.yg)("inlineCode",{parentName:"p"},"executionNamePrefix"),". If specified, any executions enqueued by those tasks will\nhave an execution name that begins with that prefix. The value of that prefix\nshould be configured in the workflow that contains the ",(0,o.yg)("inlineCode",{parentName:"p"},"QueueGranules")," or\n",(0,o.yg)("inlineCode",{parentName:"p"},"QueuePdrs")," step."),(0,o.yg)("p",null,"In the following excerpt, the ",(0,o.yg)("inlineCode",{parentName:"p"},"QueueGranules")," ",(0,o.yg)("inlineCode",{parentName:"p"},"config.executionNamePrefix"),"\nproperty is set using the value configured in the workflow's\n",(0,o.yg)("inlineCode",{parentName:"p"},"meta.executionNamePrefix"),"."),(0,o.yg)("h3",{id:"setting-executionnameprefix-config-for-queuegranules-using-rulemeta"},"Setting executionNamePrefix config for QueueGranules using rule.meta"),(0,o.yg)("p",null,'If you wanted to use a prefix of "my-prefix", you would create a rule with a ',(0,o.yg)("inlineCode",{parentName:"p"},"meta")," property similar to this:"),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-json"},'{\n  "executionNamePrefix": "my-prefix"\n}\n')),(0,o.yg)("p",null,"The value of ",(0,o.yg)("inlineCode",{parentName:"p"},"meta.executionNamePrefix")," from the rule will be set as ",(0,o.yg)("inlineCode",{parentName:"p"},"meta.executionNamePrefix"),"  in the workflow message."),(0,o.yg)("p",null,'Then, the workflow could contain a "QueueGranules" step with the following state, which uses ',(0,o.yg)("inlineCode",{parentName:"p"},"meta.executionNamePrefix")," from the message as the value for the ",(0,o.yg)("inlineCode",{parentName:"p"},"executionNamePrefix"),' config to the "QueueGranules" step:'),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-json"},'{\n  "QueueGranules": {\n    "Parameters": {\n      "cma": {\n        "event.$": "$",\n        "ReplaceConfig": {\n          "FullMessage": true\n        },\n        "task_config": {\n          "queueUrl": "${start_sf_queue_url}",\n          "provider": "{$.meta.provider}",\n          "internalBucket": "{$.meta.buckets.internal.name}",\n          "stackName": "{$.meta.stack}",\n          "granuleIngestWorkflow": "${ingest_granule_workflow_name}",\n          "executionNamePrefix": "{$.meta.executionNamePrefix}"\n        }\n      }\n    },\n    "Type": "Task",\n    "Resource": "${queue_granules_task_arn}",\n    "Retry": [\n      {\n        "ErrorEquals": [\n          "Lambda.ServiceException",\n          "Lambda.AWSLambdaException",\n          "Lambda.SdkClientException"\n        ],\n        "IntervalSeconds": 2,\n        "MaxAttempts": 6,\n        "BackoffRate": 2\n      }\n    ],\n    "Catch": [\n      {\n        "ErrorEquals": [\n          "States.ALL"\n        ],\n        "ResultPath": "$.exception",\n        "Next": "WorkflowFailed"\n      }\n    ],\n    "End": true\n  },\n}\n')))}g.isMDXComponent=!0}}]);