"use strict";(self.webpackChunk_cumulus_website=self.webpackChunk_cumulus_website||[]).push([[98778],{15680(e,t,a){a.d(t,{xA:()=>c,yg:()=>h});var n=a(296540);function i(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function s(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach(function(t){i(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function r(e,t){if(null==e)return{};var a,n,i=function(e,t){if(null==e)return{};var a,n,i={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(i[a]=e[a]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}var l=n.createContext({}),d=function(e){var t=n.useContext(l),a=t;return e&&(a="function"==typeof e?e(t):s(s({},t),e)),a},c=function(e){var t=d(e.components);return n.createElement(l.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},p=n.forwardRef(function(e,t){var a=e.components,i=e.mdxType,o=e.originalType,l=e.parentName,c=r(e,["components","mdxType","originalType","parentName"]),p=d(a),h=i,m=p["".concat(l,".").concat(h)]||p[h]||u[h]||o;return a?n.createElement(m,s(s({ref:t},c),{},{components:a})):n.createElement(m,s({ref:t},c))});function h(e,t){var a=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var o=a.length,s=new Array(o);s[0]=p;var r={};for(var l in t)hasOwnProperty.call(t,l)&&(r[l]=t[l]);r.originalType=e,r.mdxType="string"==typeof e?e:i,s[1]=r;for(var d=2;d<o;d++)s[d]=a[d];return n.createElement.apply(null,s)}return n.createElement.apply(null,a)}p.displayName="MDXCreateElement"},55447(e,t,a){a.r(t),a.d(t,{assets:()=>c,contentTitle:()=>l,default:()=>h,frontMatter:()=>r,metadata:()=>d,toc:()=>u});var n=a(58168),i=a(198587),o=(a(296540),a(15680)),s=["components"],r={id:"adding-a-task",title:"Contributing a Task",hide_title:!1},l=void 0,d={unversionedId:"adding-a-task",id:"adding-a-task",title:"Contributing a Task",description:"We're tracking reusable Cumulus tasks in this list and, if you've got one you'd like to share with others, read on to learn how.",source:"@site/../docs/adding-a-task.md",sourceDirName:".",slug:"/adding-a-task",permalink:"/cumulus/docs/next/adding-a-task",draft:!1,tags:[],version:"current",lastUpdatedBy:"Bradley J. Hazuka",lastUpdatedAt:1768574549,formattedLastUpdatedAt:"Jan 16, 2026",frontMatter:{id:"adding-a-task",title:"Contributing a Task",hide_title:!1},sidebar:"docs",previous:{title:"Workflow Configuration How To's",permalink:"/cumulus/docs/next/workflows/workflow-configuration-how-to"},next:{title:"Workflows",permalink:"/cumulus/docs/next/category/workflows"}},c={},u=[{value:"The tasks.md file is generated in the build process",id:"the-tasksmd-file-is-generated-in-the-build-process",level:2},{value:"Software Best Practices and Expectations",id:"software-best-practices-and-expectations",level:2},{value:"Example Templates and Task Messaging",id:"example-templates-and-task-messaging",level:2},{value:"Task Layout and Standards",id:"task-layout-and-standards",level:2},{value:"Creating a task",id:"creating-a-task",level:3},{value:"Explanation of directories",id:"explanation-of-directories",level:3},{value:"<code>src</code> directory",id:"src-directory",level:4},{value:"<code>tests</code> directory",id:"tests-directory",level:4},{value:"<code>deploy</code> directory",id:"deploy-directory",level:4},{value:"<code>schemas</code> directory",id:"schemas-directory",level:4},{value:"<code>bin</code> directory",id:"bin-directory",level:4},{value:"Explanation of files",id:"explanation-of-files",level:3},{value:"<code>README.md</code> file",id:"readmemd-file",level:4},{value:"<code>package.json</code> file",id:"packagejson-file",level:4},{value:"Quality Testing, Building, and Deploying",id:"quality-testing-building-and-deploying",level:2}],p={toc:u};function h(e){var t=e.components,a=(0,i.A)(e,s);return(0,o.yg)("wrapper",(0,n.A)({},p,a,{components:t,mdxType:"MDXLayout"}),(0,o.yg)("p",null,"We're tracking reusable Cumulus tasks ",(0,o.yg)("a",{parentName:"p",href:"/cumulus/docs/next/tasks"},"in this list")," and, if you've got one you'd like to share with others, read on to learn how."),(0,o.yg)("h2",{id:"the-tasksmd-file-is-generated-in-the-build-process"},"The tasks.md file is generated in the build process"),(0,o.yg)("p",null,"The tasks list in docs/tasks.md is generated from the list of task package names from the tasks folder."),(0,o.yg)("admonition",{type:"caution"},(0,o.yg)("p",{parentName:"admonition"},"Do not edit the docs/tasks.md file directly.")),(0,o.yg)("h2",{id:"software-best-practices-and-expectations"},"Software Best Practices and Expectations"),(0,o.yg)("p",null,"The repository uses lerna to manage the repository. Please reference the ",(0,o.yg)("a",{parentName:"p",href:"/cumulus/docs/next/development/quality-and-coverage"},"Quality and Coverage documentation")," and the ",(0,o.yg)("a",{parentName:"p",href:"/cumulus/docs/next/development/python-best-practices"},"Python Best Practices")," or ",(0,o.yg)("a",{parentName:"p",href:"/cumulus/docs/next/development/typescript-best-practices"},"TypeScript Best Practices")," documentation for expectations and tooling for the specific language."),(0,o.yg)("h2",{id:"example-templates-and-task-messaging"},"Example Templates and Task Messaging"),(0,o.yg)("p",null,"Example templates have been created for both ",(0,o.yg)("a",{parentName:"p",href:"https://github.com/nasa/cumulus/tree/master/example/lambdas/python-reference-task"},"Python")," and ",(0,o.yg)("a",{parentName:"p",href:"https://github.com/nasa/cumulus/tree/master/tasks/add-missing-file-checksums"},"Typescript")," tasks for developers that exhibit the best practices and expectations for creating a Cumulus task. Tasks should conform to the Cumulus Message Adapter Schema for inter task messaging. This is the accepted input and output scheme."),(0,o.yg)("h2",{id:"task-layout-and-standards"},"Task Layout and Standards"),(0,o.yg)("h3",{id:"creating-a-task"},"Creating a task"),(0,o.yg)("p",null,"To create a task, start by making a directory under the tasks directory. The new task directory name should be a descriptive name of the task. The name should be in lower case with ",(0,o.yg)("inlineCode",{parentName:"p"},"-")," used in place of spaces. Copy the contents of the task language example to the new task directory."),(0,o.yg)("p",null,"The new task directory should look something like the following. Note that the files may differ slightly depending on the language."),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-text"},".\n\u251c\u2500\u2500 bin\n\u2502   \u2514\u2500\u2500 package.sh\n\u251c\u2500\u2500 Dockerfile\n\u251c\u2500\u2500 package.json\n\u251c\u2500\u2500 pyproject.toml*\n\u251c\u2500\u2500 README.md\n\u251c\u2500\u2500 schemas\n\u2502   \u251c\u2500\u2500 config.json\n\u2502   \u251c\u2500\u2500 input.json\n\u2502   \u2514\u2500\u2500 output.json\n\u251c\u2500\u2500 src\n\u2502   \u251c\u2500\u2500 main.py*\n\u2502   \u2514\u2500\u2500 python_refrence_task*\n\u2502       \u251c\u2500\u2500 __init__.py*\n\u2502       \u251c\u2500\u2500 schema.py*\n\u2502       \u2514\u2500\u2500 task.py*\n\u251c\u2500\u2500 deploy\n\u2502   \u251c\u2500\u2500 main.tf\n\u2502   \u251c\u2500\u2500 output.tf\n\u2502   \u2514\u2500\u2500 variables.tf\n\u251c\u2500\u2500 tests\n\u2502   \u251c\u2500\u2500 integration_tests\n\u2502   \u2514\u2500\u2500 unit_tests\n\u2502       \u251c\u2500\u2500 __init__.py*\n\u2502       \u251c\u2500\u2500 python_reference_task*\n\u2502       \u2502   \u251c\u2500\u2500 __init__.py*\n\u2502       \u2502   \u2514\u2500\u2500 test_task.py*\n\u2502       \u2514\u2500\u2500 test_main.py*\n\u251c\u2500\u2500 tsconfig.json*\n\u2514\u2500\u2500 webpack.config.js*\n")),(0,o.yg)("admonition",{type:"note"},(0,o.yg)("p",{parentName:"admonition"},"Those files and directories with a trailing ",(0,o.yg)("inlineCode",{parentName:"p"},"*")," are language specific files and directories and may not be present depending on the language and example template related to the task.")),(0,o.yg)("h3",{id:"explanation-of-directories"},"Explanation of directories"),(0,o.yg)("p",null,"The task layout should include the following directories."),(0,o.yg)("h4",{id:"src-directory"},(0,o.yg)("inlineCode",{parentName:"h4"},"src")," directory"),(0,o.yg)("p",null,"The ",(0,o.yg)("inlineCode",{parentName:"p"},"src")," directory should contain the code for your task."),(0,o.yg)("h4",{id:"tests-directory"},(0,o.yg)("inlineCode",{parentName:"h4"},"tests")," directory"),(0,o.yg)("p",null,"The ",(0,o.yg)("inlineCode",{parentName:"p"},"tests")," directory should contain all unit tests and if possible, all integraton tests."),(0,o.yg)("h4",{id:"deploy-directory"},(0,o.yg)("inlineCode",{parentName:"h4"},"deploy")," directory"),(0,o.yg)("p",null,"The ",(0,o.yg)("inlineCode",{parentName:"p"},"deploy")," directory should contain the terraform code for deploying the task."),(0,o.yg)("h4",{id:"schemas-directory"},(0,o.yg)("inlineCode",{parentName:"h4"},"schemas")," directory"),(0,o.yg)("p",null,"The ",(0,o.yg)("inlineCode",{parentName:"p"},"schemas")," directory contains JSON schemas for the input, output , and configuration the task. These files can be generated documentation or JSON schema documentation used for interface validation."),(0,o.yg)("h4",{id:"bin-directory"},(0,o.yg)("inlineCode",{parentName:"h4"},"bin")," directory"),(0,o.yg)("p",null,"The ",(0,o.yg)("inlineCode",{parentName:"p"},"bin")," directory contains various scripts specific to this task, often written in bash, to help build, test, and deploy the task."),(0,o.yg)("h3",{id:"explanation-of-files"},"Explanation of files"),(0,o.yg)("p",null,"The task should contain the following files."),(0,o.yg)("h4",{id:"readmemd-file"},(0,o.yg)("inlineCode",{parentName:"h4"},"README.md")," file"),(0,o.yg)("p",null,"The ",(0,o.yg)("inlineCode",{parentName:"p"},"README.md")," file should provide sufficient documentation about the task. The template for the task README.md file can be found below. Those strings surrounded by ",(0,o.yg)("inlineCode",{parentName:"p"},"<>")," are indicators where a developer should replace the information with that specific to the task."),(0,o.yg)("pre",null,(0,o.yg)("code",{parentName:"pre",className:"language-md"},"# @cumulus/<task-name>\n\n<Extended description of what the task does along with any unique use cases, corner cases, or functionality explained.>\n\n## Usage\n\nThis lambda takes the following input and config objects, derived from workflow configuration using the [Cumulus Message Adapter](https://github.com/nasa/cumulus-message-adapter/blob/master/CONTRACT.md) to drive configuration from the full cumulus message. The output from the task follows the Cumulus Message Adapter contract and provides the information detailed below.\n\n### Configuration\n\n<This section provides information on the configuration along with a schema for valid configuration settings, and an example of a valid configuration that is expected.>\n\n### Input\n\n<This section provides information on the task input along with a schema for valid input values and an example of a valid input.>\n\n### Output\n\n<This section provides information on the task output. This section may include a schema for a valid output, and example of a message output, and any other example artifacts and/or descriptions related to the final products and functionality of the task.>\n\n### Example workflow configuration and use\n\n<This section explains how the task should be configured in a workflow and provide a valid workflow configuration block example of using the task in a workflow. Additionally, this section provides a real life example of the task in a workflow and will ideally point to an workflow integration task that uses the task in the repository.>\n\n## Architecture\n\n<This section should provide a brief description of the task architecture. Ideally, an architectural drawing should be provided if able. Below is an example of a mermaid diagram that GitHub renders natively. See the mermaid documentation on rendering various diagrams at https://mermaid.js.org/intro/syntax-reference.html>\n\n```mermaid\narchitecture-beta\n    group trigger(cloud) [Starting Task]\n    group task(cloud)[Task]\n\n    service db(database)[Database] in task\n    service ps3(disk)[Provider S3 Storage] in task\n    service as3(disk)[Archive S3 Storage] in task\n    service lambda(server)[Lambda Task] in task\n    \n    service tlambda(server) [Lambda Task] in trigger\n\n    tlambda{group}:B --\x3e T:lambda{group}\n    \n    lambda:R --\x3e L:db\n    lambda:L --\x3e R:ps3\n    lambda:B --\x3e T:as3\n```\n\n### Internal Dependencies\n\n<This section should describe any internal dependencies on Cumulus the task relies on. Examples may include the Cumulus catalog API, database, or AWS specific components like S3 or SNS.>\n\n### External Dependencies\n\n<This section should describe any external dependencies the task relies on. Examples include CMR, LZRDS, or other enterprise applications.>\n\n## Development and Deployment\n\n<This section is optional and provides any specifics that are unique to developing with this task. This may include specific use cases and unit tests, test files, or development strategies. This section may also contain instructions for deploying the task as an individual lambda without the entire Cumulus stack or as a part of a trimmed down deployment that can be used for testing.>\n\n## Contributing\n\nTo make a contribution, please [see our Cumulus contributing guidelines](https://github.com/nasa/cumulus/blob/master/CONTRIBUTING.md) and our documentation on [adding a task](https://nasa.github.io/cumulus/docs/adding-a-task)\n\n## About Cumulus\n\nCumulus is a cloud-based data ingest, archive, distribution and management prototype for NASA's future Earth science data streams.\n\n[Cumulus Documentation](https://nasa.github.io/cumulus)\n")),(0,o.yg)("h4",{id:"packagejson-file"},(0,o.yg)("inlineCode",{parentName:"h4"},"package.json")," file"),(0,o.yg)("p",null,"The ",(0,o.yg)("inlineCode",{parentName:"p"},"package.json")," file contains information on the task including executable commands for scripts to perform quality checking, building, and deploying of tasks."),(0,o.yg)("admonition",{type:"note"},(0,o.yg)("p",{parentName:"admonition"},"In Python tasks, the ",(0,o.yg)("inlineCode",{parentName:"p"},"package.json")," file is generated from the ",(0,o.yg)("inlineCode",{parentName:"p"},"pyproject.toml")," file using a script. This file is used throughout the repository to perform repo wide CI/CD builds, deploys, and testing.")),(0,o.yg)("h2",{id:"quality-testing-building-and-deploying"},"Quality Testing, Building, and Deploying"),(0,o.yg)("p",null,"All tasks should have worthwhile unit tests that accurately represent the input/output data that is expected from the task. Tasks should have a minimum of 80% coverage for unit tests. In addition to unit tests, integration tests should also be created and automated. Generally, integration tests should be done using the proper generic workflow patterns the task is expected to be a part of that covers known use cases. Additional Enterprise level testing verification and validation will be done in coordination with the Enterprise Test and Quality team in a production like setting and with production like data to validate performance and regression tests for any potential production issues."),(0,o.yg)("p",null,"The task should build using one of two methods. For tasks that will be packaged for AWS lambdas, a zip file should be created for deployment. All other tasks should be built using an OCI compliant image. Examples of both build types are available in the language specific example."),(0,o.yg)("p",null,"Deploying a task should be self contained as a terraform module. The task should be able to be deployed either as itself and as part of the larger software deployment."))}h.isMDXComponent=!0}}]);