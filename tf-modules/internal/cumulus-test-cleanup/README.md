# Cumulus Test Cleanup

Module to run nightly test cleanup of resources left over from Cumulus integration test runs. This deploys a test cleanup lambda that is configured to run nightly.

This is meant to be deployed once for each AWS account.

Currently cleans up:

- Kinesis streams generated by tests that are older than one day

## Build

Run `npm install` to install packages then `npm run package` to prepare lambda zip file for deployment.

## Deployment

Copy the `terraform.tfvars.sample` file to `terraform.tfvars`. Populate the sample file with values that apply to your AWS environment.

As this should be deployed once per AWS account, the remote state should be configured in the `terraform.tf` file, so updates can be made later.

Run `terraform init`.

Run `terraform apply`.
